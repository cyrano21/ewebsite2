"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/products/most-viewed";
exports.ids = ["pages/api/products/most-viewed"];
exports.modules = {

/***/ "(api-node)/./config/db.js":
/*!**********************!*\
  !*** ./config/db.js ***!
  \**********************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst connect = (__webpack_require__(/*! mongoose */ \"mongoose\").connect);\n// Options de connexion\nconst options = {\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n};\n// URL de connexion (utilse la variable d'environnement ou une URL par défaut pour le développement local)\nconst connectionUrl = process.env.MONGODB_URI || 'mongodb://localhost:27017/ewebsite2-francise';\n// Fonction de connexion à la base de données\nconst connectDB = async ()=>{\n    try {\n        const conn = await mongoose.connect(connectionUrl, options);\n        console.log(`MongoDB connecté: ${conn.connection.host}`);\n        return conn;\n    } catch (error) {\n        console.error(`Erreur de connexion à MongoDB: ${error.message}`);\n        // Mode fallback - utilser des données locales\n        console.warn('utilsation du mode hors ligne avec des données locales.');\n        return null;\n    }\n};\n// Vérification de la connexion\nmongoose.connection.on('connected', ()=>{\n    console.log('Mongoose connecté à MongoDB');\n});\nmongoose.connection.on('error', (err)=>{\n    console.error(`Erreur de connexion Mongoose: ${err.message}`);\n});\nmongoose.connection.on('disconnected', ()=>{\n    console.log('Mongoose déconnecté de MongoDB');\n});\n// Fermeture propre lors de l'arrêt de l'application\nprocess.on('SIGINT', async ()=>{\n    await mongoose.connection.close();\n    console.log('Connexion à MongoDB fermée suite à l\\'arrêt de l\\'application');\n    process.exit(0);\n});\nmodule.exports = connectDB;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2NvbmZpZy9kYi5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsV0FBV0MsbUJBQU9BLENBQUMsMEJBQVU7QUFDbkMsTUFBTUMsVUFBVUQseURBQTJCO0FBRTNDLHVCQUF1QjtBQUN2QixNQUFNRSxVQUFVO0lBQ2RDLGlCQUFpQjtJQUNqQkMsb0JBQW9CO0FBQ3RCO0FBRUEsMEdBQTBHO0FBQzFHLE1BQU1DLGdCQUFnQkMsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLElBQUk7QUFFakQsNkNBQTZDO0FBQzdDLE1BQU1DLFlBQVk7SUFDaEIsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTVgsU0FBU0UsT0FBTyxDQUFDSSxlQUFlSDtRQUNuRFMsUUFBUUMsR0FBRyxDQUFDLENBQUMsa0JBQWtCLEVBQUVGLEtBQUtHLFVBQVUsQ0FBQ0MsSUFBSSxFQUFFO1FBQ3ZELE9BQU9KO0lBQ1QsRUFBRSxPQUFPSyxPQUFPO1FBQ2RKLFFBQVFJLEtBQUssQ0FBQyxDQUFDLCtCQUErQixFQUFFQSxNQUFNQyxPQUFPLEVBQUU7UUFDL0QsOENBQThDO1FBQzlDTCxRQUFRTSxJQUFJLENBQUM7UUFDYixPQUFPO0lBQ1Q7QUFDRjtBQUVBLCtCQUErQjtBQUMvQmxCLFNBQVNjLFVBQVUsQ0FBQ0ssRUFBRSxDQUFDLGFBQWE7SUFDbENQLFFBQVFDLEdBQUcsQ0FBQztBQUNkO0FBRUFiLFNBQVNjLFVBQVUsQ0FBQ0ssRUFBRSxDQUFDLFNBQVMsQ0FBQ0M7SUFDL0JSLFFBQVFJLEtBQUssQ0FBQyxDQUFDLDhCQUE4QixFQUFFSSxJQUFJSCxPQUFPLEVBQUU7QUFDOUQ7QUFFQWpCLFNBQVNjLFVBQVUsQ0FBQ0ssRUFBRSxDQUFDLGdCQUFnQjtJQUNyQ1AsUUFBUUMsR0FBRyxDQUFDO0FBQ2Q7QUFFQSxvREFBb0Q7QUFDcEROLFFBQVFZLEVBQUUsQ0FBQyxVQUFVO0lBQ25CLE1BQU1uQixTQUFTYyxVQUFVLENBQUNPLEtBQUs7SUFDL0JULFFBQVFDLEdBQUcsQ0FBQztJQUNaTixRQUFRZSxJQUFJLENBQUM7QUFDZjtBQUVBQyxPQUFPQyxPQUFPLEdBQUdkIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvdWlzIE9saXZpZXJcXERvd25sb2Fkc1xcZXdlYnNpdGUyLWZyYW5jaXNlXFxjb25maWdcXGRiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuY29uc3QgY29ubmVjdCA9IHJlcXVpcmUoJ21vbmdvb3NlJykuY29ubmVjdDtcclxuXHJcbi8vIE9wdGlvbnMgZGUgY29ubmV4aW9uXHJcbmNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxyXG4gIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcclxufTtcclxuXHJcbi8vIFVSTCBkZSBjb25uZXhpb24gKHV0aWxzZSBsYSB2YXJpYWJsZSBkJ2Vudmlyb25uZW1lbnQgb3UgdW5lIFVSTCBwYXIgZMOpZmF1dCBwb3VyIGxlIGTDqXZlbG9wcGVtZW50IGxvY2FsKVxyXG5jb25zdCBjb25uZWN0aW9uVXJsID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgfHwgJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvZXdlYnNpdGUyLWZyYW5jaXNlJztcclxuXHJcbi8vIEZvbmN0aW9uIGRlIGNvbm5leGlvbiDDoCBsYSBiYXNlIGRlIGRvbm7DqWVzXHJcbmNvbnN0IGNvbm5lY3REQiA9IGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY29ubiA9IGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoY29ubmVjdGlvblVybCwgb3B0aW9ucyk7XHJcbiAgICBjb25zb2xlLmxvZyhgTW9uZ29EQiBjb25uZWN0w6k6ICR7Y29ubi5jb25uZWN0aW9uLmhvc3R9YCk7XHJcbiAgICByZXR1cm4gY29ubjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihgRXJyZXVyIGRlIGNvbm5leGlvbiDDoCBNb25nb0RCOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAvLyBNb2RlIGZhbGxiYWNrIC0gdXRpbHNlciBkZXMgZG9ubsOpZXMgbG9jYWxlc1xyXG4gICAgY29uc29sZS53YXJuKCd1dGlsc2F0aW9uIGR1IG1vZGUgaG9ycyBsaWduZSBhdmVjIGRlcyBkb25uw6llcyBsb2NhbGVzLicpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gVsOpcmlmaWNhdGlvbiBkZSBsYSBjb25uZXhpb25cclxubW9uZ29vc2UuY29ubmVjdGlvbi5vbignY29ubmVjdGVkJywgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKCdNb25nb29zZSBjb25uZWN0w6kgw6AgTW9uZ29EQicpO1xyXG59KTtcclxuXHJcbm1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Vycm9yJywgKGVycikgPT4ge1xyXG4gIGNvbnNvbGUuZXJyb3IoYEVycmV1ciBkZSBjb25uZXhpb24gTW9uZ29vc2U6ICR7ZXJyLm1lc3NhZ2V9YCk7XHJcbn0pO1xyXG5cclxubW9uZ29vc2UuY29ubmVjdGlvbi5vbignZGlzY29ubmVjdGVkJywgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKCdNb25nb29zZSBkw6ljb25uZWN0w6kgZGUgTW9uZ29EQicpO1xyXG59KTtcclxuXHJcbi8vIEZlcm1ldHVyZSBwcm9wcmUgbG9ycyBkZSBsJ2FycsOqdCBkZSBsJ2FwcGxpY2F0aW9uXHJcbnByb2Nlc3Mub24oJ1NJR0lOVCcsIGFzeW5jICgpID0+IHtcclxuICBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmNsb3NlKCk7XHJcbiAgY29uc29sZS5sb2coJ0Nvbm5leGlvbiDDoCBNb25nb0RCIGZlcm3DqWUgc3VpdGUgw6AgbFxcJ2FycsOqdCBkZSBsXFwnYXBwbGljYXRpb24nKTtcclxuICBwcm9jZXNzLmV4aXQoMCk7XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjb25uZWN0REI7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJjb25uZWN0Iiwib3B0aW9ucyIsInVzZU5ld1VybFBhcnNlciIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbm5lY3Rpb25VcmwiLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJjb25uZWN0REIiLCJjb25uIiwiY29uc29sZSIsImxvZyIsImNvbm5lY3Rpb24iLCJob3N0IiwiZXJyb3IiLCJtZXNzYWdlIiwid2FybiIsIm9uIiwiZXJyIiwiY2xvc2UiLCJleGl0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./config/db.js\n");

/***/ }),

/***/ "(api-node)/./models/Product.js":
/*!***************************!*\
  !*** ./models/Product.js ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nconst slugify = __webpack_require__(/*! slugify */ \"slugify\");\n// Sous-schémas\nconst SpecificationSchema = new mongoose.Schema({\n    key: {\n        type: String,\n        required: true\n    },\n    value: {\n        type: String,\n        required: true\n    }\n}, {\n    _id: false\n});\nconst ReviewSchema = new mongoose.Schema({\n    user: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: 'User',\n        required: true\n    },\n    rating: {\n        type: Number,\n        required: true,\n        min: 1,\n        max: 5\n    },\n    comment: {\n        type: String,\n        required: true\n    },\n    date: {\n        type: Date,\n        default: Date.now\n    },\n    approved: {\n        type: Boolean,\n        default: false\n    }\n}, {\n    timestamps: true\n});\n// Schéma principal Product\nconst ProductSchema = new mongoose.Schema({\n    name: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    slug: {\n        type: String,\n        index: true\n    },\n    description: {\n        type: String,\n        required: true\n    },\n    price: {\n        type: Number,\n        required: true\n    },\n    discountPrice: {\n        type: Number,\n        default: null\n    },\n    category: {\n        type: mongoose.Schema.Types.ObjectId,\n        ref: 'Category',\n        required: true\n    },\n    brand: {\n        type: String,\n        trim: true\n    },\n    seller: {\n        type: String,\n        trim: true\n    },\n    images: {\n        type: [\n            String\n        ],\n        default: []\n    },\n    imageUrl: {\n        type: String\n    },\n    cloudinaryId: {\n        type: String\n    },\n    colors: [\n        {\n            name: {\n                type: String,\n                required: true\n            },\n            hex: {\n                type: String,\n                required: true\n            },\n            img: {\n                type: String\n            }\n        }\n    ],\n    sizes: {\n        type: [\n            String\n        ],\n        default: []\n    },\n    specifications: {\n        type: [\n            SpecificationSchema\n        ],\n        default: []\n    },\n    tags: {\n        type: [\n            String\n        ],\n        default: []\n    },\n    rating: {\n        type: Number,\n        default: 0\n    },\n    ratingsCount: {\n        type: Number,\n        default: 0\n    },\n    reviews: {\n        type: [\n            ReviewSchema\n        ],\n        default: []\n    },\n    stock: {\n        type: Number,\n        default: 0\n    },\n    quantity: {\n        type: Number,\n        default: 0\n    },\n    totalSold: {\n        type: Number,\n        default: 0\n    },\n    isNew: {\n        type: Boolean,\n        default: false\n    },\n    isFeatured: {\n        type: Boolean,\n        default: false\n    },\n    boughtTogether: [\n        {\n            type: mongoose.Schema.Types.ObjectId,\n            ref: 'Product'\n        }\n    ],\n    similarProducts: [\n        {\n            type: mongoose.Schema.Types.ObjectId,\n            ref: 'Product'\n        }\n    ],\n    legacyId: {\n        type: String,\n        index: true\n    } // Pour import UUID\n}, {\n    timestamps: true\n});\n// Génération automatique du slug\nProductSchema.pre('save', function(next) {\n    if (!this.slug && this.name) {\n        this.slug = slugify(this.name, {\n            lower: true,\n            strict: true\n        });\n    }\n    next();\n});\nmodule.exports = mongoose.models.Product || mongoose.model('Product', ProductSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVFNLFNBQVM7SUFBRTtJQUU3QzhCLE9BQWtCO1FBQUUvQyxNQUFNb0I7UUFBU0gsU0FBUztJQUFNO0lBQ2xEK0IsWUFBa0I7UUFBRWhELE1BQU1vQjtRQUFTSCxTQUFTO0lBQU07SUFFbERnQyxnQkFBa0I7UUFBQztZQUFFakQsTUFBTU4sU0FBU0ksTUFBTSxDQUFDUyxLQUFLLENBQUNDLFFBQVE7WUFBRUMsS0FBSztRQUFVO0tBQUU7SUFDNUV5QyxpQkFBa0I7UUFBQztZQUFFbEQsTUFBTU4sU0FBU0ksTUFBTSxDQUFDUyxLQUFLLENBQUNDLFFBQVE7WUFBRUMsS0FBSztRQUFVO0tBQUU7SUFFNUUwQyxVQUFrQjtRQUFFbkQsTUFBTUM7UUFBUXlCLE9BQU87SUFBSyxFQUFTLG1CQUFtQjtBQUM1RSxHQUFHO0lBQ0RMLFlBQVk7QUFDZDtBQUVBLGlDQUFpQztBQUNqQ0MsY0FBYzhCLEdBQUcsQ0FBQyxRQUFRLFNBQVNDLElBQUk7SUFDckMsSUFBSSxDQUFDLElBQUksQ0FBQzVCLElBQUksSUFBSSxJQUFJLENBQUNGLElBQUksRUFBRTtRQUMzQixJQUFJLENBQUNFLElBQUksR0FBRzdCLFFBQVEsSUFBSSxDQUFDMkIsSUFBSSxFQUFFO1lBQUUrQixPQUFPO1lBQU1DLFFBQVE7UUFBSztJQUM3RDtJQUNBRjtBQUNGO0FBRUFHLE9BQU9DLE9BQU8sR0FBRy9ELFNBQVNnRSxNQUFNLENBQUNDLE9BQU8sSUFBSWpFLFNBQVNrRSxLQUFLLENBQUMsV0FBV3RDIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvdWlzIE9saXZpZXJcXERvd25sb2Fkc1xcZXdlYnNpdGUyLWZyYW5jaXNlXFxtb2RlbHNcXFByb2R1Y3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpO1xuY29uc3Qgc2x1Z2lmeSA9IHJlcXVpcmUoJ3NsdWdpZnknKTtcblxuLy8gU291cy1zY2jDqW1hc1xuY29uc3QgU3BlY2lmaWNhdGlvblNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICBrZXk6ICAgeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHZhbHVlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfVxufSwgeyBfaWQ6IGZhbHNlIH0pO1xuXG5jb25zdCBSZXZpZXdTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgdXNlcjogICAgIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdVc2VyJywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgcmF0aW5nOiAgIHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSwgbWluOiAxLCBtYXg6IDUgfSxcbiAgY29tbWVudDogIHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBkYXRlOiAgICAgeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxuICBhcHByb3ZlZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9XG59LCB7IHRpbWVzdGFtcHM6IHRydWUgfSk7XG5cbi8vIFNjaMOpbWEgcHJpbmNpcGFsIFByb2R1Y3RcbmNvbnN0IFByb2R1Y3RTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKHtcbiAgbmFtZTogICAgICAgICAgICAgeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB0cmltOiB0cnVlIH0sXG4gIHNsdWc6ICAgICAgICAgICAgIHsgdHlwZTogU3RyaW5nLCBpbmRleDogdHJ1ZSB9LFxuICBkZXNjcmlwdGlvbjogICAgICB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgcHJpY2U6ICAgICAgICAgICAgeyB0eXBlOiBOdW1iZXIsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGRpc2NvdW50UHJpY2U6ICAgIHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiBudWxsIH0sXG4gIGNhdGVnb3J5OiAgICAgICAgIHsgdHlwZTogbW9uZ29vc2UuU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdDYXRlZ29yeScsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGJyYW5kOiAgICAgICAgICAgIHsgdHlwZTogU3RyaW5nLCB0cmltOiB0cnVlIH0sXG4gIHNlbGxlcjogICAgICAgICAgIHsgdHlwZTogU3RyaW5nLCB0cmltOiB0cnVlIH0sXG5cbiAgaW1hZ2VzOiAgICAgICAgICAgeyB0eXBlOiBbU3RyaW5nXSwgZGVmYXVsdDogW10gfSwgICAgLy8gR2FsZXJpZSBk4oCZaW1hZ2VzXG4gIGltYWdlVXJsOiAgICAgICAgIHsgdHlwZTogU3RyaW5nIH0sICAgICAgICAgICAgICAgICAgICAvLyBJbWFnZSBwcmluY2lwYWxlXG4gIGNsb3VkaW5hcnlJZDogICAgIHsgdHlwZTogU3RyaW5nIH0sICAgICAgICAgICAgICAgICAgICAvLyBQb3VyIHN1cHByZXNzaW9uXG5cbiAgY29sb3JzOiBbICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VsZXVycyBkaXNwb25pYmxlc1xuICAgIHtcbiAgICAgIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICAgICAgaGV4OiAgeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gICAgICBpbWc6ICB7IHR5cGU6IFN0cmluZyB9XG4gICAgfVxuICBdLFxuICBzaXplczogICAgICAgICAgICB7IHR5cGU6IFtTdHJpbmddLCBkZWZhdWx0OiBbXSB9LCAgICAgLy8gVGFpbGxlcyAoUywgTSwgTC4uLilcbiAgc3BlY2lmaWNhdGlvbnM6ICAgeyB0eXBlOiBbU3BlY2lmaWNhdGlvblNjaGVtYV0sIGRlZmF1bHQ6IFtdIH0sXG5cbiAgdGFnczogICAgICAgICAgICAgeyB0eXBlOiBbU3RyaW5nXSwgZGVmYXVsdDogW10gfSxcbiAgcmF0aW5nOiAgICAgICAgICAgeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgcmF0aW5nc0NvdW50OiAgICAgeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgcmV2aWV3czogICAgICAgICAgeyB0eXBlOiBbUmV2aWV3U2NoZW1hXSwgZGVmYXVsdDogW10gfSxcblxuICBzdG9jazogICAgICAgICAgICB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICBxdWFudGl0eTogICAgICAgICB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LCAgICAgICAgIC8vIFF1YW50aXTDqSDDoCBham91dGVyIGF1IHBhbmllclxuICB0b3RhbFNvbGQ6ICAgICAgICB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LCAgICAgICAgIC8vIE5vbWJyZSB2ZW5kdVxuXG4gIGlzTmV3OiAgICAgICAgICAgIHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogZmFsc2UgfSxcbiAgaXNGZWF0dXJlZDogICAgICAgeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuXG4gIGJvdWdodFRvZ2V0aGVyOiAgIFt7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnUHJvZHVjdCcgfV0sXG4gIHNpbWlsYXJQcm9kdWN0czogIFt7IHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwgcmVmOiAnUHJvZHVjdCcgfV0sXG5cbiAgbGVnYWN5SWQ6ICAgICAgICAgeyB0eXBlOiBTdHJpbmcsIGluZGV4OiB0cnVlIH0gICAgICAgIC8vIFBvdXIgaW1wb3J0IFVVSURcbn0sIHtcbiAgdGltZXN0YW1wczogdHJ1ZVxufSk7XG5cbi8vIEfDqW7DqXJhdGlvbiBhdXRvbWF0aXF1ZSBkdSBzbHVnXG5Qcm9kdWN0U2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uKG5leHQpIHtcbiAgaWYgKCF0aGlzLnNsdWcgJiYgdGhpcy5uYW1lKSB7XG4gICAgdGhpcy5zbHVnID0gc2x1Z2lmeSh0aGlzLm5hbWUsIHsgbG93ZXI6IHRydWUsIHN0cmljdDogdHJ1ZSB9KTtcbiAgfVxuICBuZXh0KCk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbHMuUHJvZHVjdCB8fCBtb25nb29zZS5tb2RlbCgnUHJvZHVjdCcsIFByb2R1Y3RTY2hlbWEpO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwicmVxdWlyZSIsInNsdWdpZnkiLCJTcGVjaWZpY2F0aW9uU2NoZW1hIiwiU2NoZW1hIiwia2V5IiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidmFsdWUiLCJfaWQiLCJSZXZpZXdTY2hlbWEiLCJ1c2VyIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJhdGluZyIsIk51bWJlciIsIm1pbiIsIm1heCIsImNvbW1lbnQiLCJkYXRlIiwiRGF0ZSIsImRlZmF1bHQiLCJub3ciLCJhcHByb3ZlZCIsIkJvb2xlYW4iLCJ0aW1lc3RhbXBzIiwiUHJvZHVjdFNjaGVtYSIsIm5hbWUiLCJ0cmltIiwic2x1ZyIsImluZGV4IiwiZGVzY3JpcHRpb24iLCJwcmljZSIsImRpc2NvdW50UHJpY2UiLCJjYXRlZ29yeSIsImJyYW5kIiwic2VsbGVyIiwiaW1hZ2VzIiwiaW1hZ2VVcmwiLCJjbG91ZGluYXJ5SWQiLCJjb2xvcnMiLCJoZXgiLCJpbWciLCJzaXplcyIsInNwZWNpZmljYXRpb25zIiwidGFncyIsInJhdGluZ3NDb3VudCIsInJldmlld3MiLCJzdG9jayIsInF1YW50aXR5IiwidG90YWxTb2xkIiwiaXNOZXciLCJpc0ZlYXR1cmVkIiwiYm91Z2h0VG9nZXRoZXIiLCJzaW1pbGFyUHJvZHVjdHMiLCJsZWdhY3lJZCIsInByZSIsIm5leHQiLCJsb3dlciIsInN0cmljdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJtb2RlbHMiLCJQcm9kdWN0IiwibW9kZWwiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./models/Product.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2Fmost-viewed&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5Cmost-viewed.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2Fmost-viewed&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5Cmost-viewed.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_products_most_viewed_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\products\\most-viewed.js */ \"(api-node)/./pages/api/products/most-viewed.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_most_viewed_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_most_viewed_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/products/most-viewed\",\n        pathname: \"/api/products/most-viewed\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_products_most_viewed_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGcHJvZHVjdHMlMkZtb3N0LXZpZXdlZCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDcHJvZHVjdHMlNUNtb3N0LXZpZXdlZC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUNtRTtBQUNuRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsK0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLCtEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHByb2R1Y3RzXFxcXG1vc3Qtdmlld2VkLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9kdWN0cy9tb3N0LXZpZXdlZFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2R1Y3RzL21vc3Qtdmlld2VkXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2Fmost-viewed&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5Cmost-viewed.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/products/most-viewed.js":
/*!*******************************************!*\
  !*** ./pages/api/products/most-viewed.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _config_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../config/db */ \"(api-node)/./config/db.js\");\n/* harmony import */ var _config_db__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_config_db__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _models_Product__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../models/Product */ \"(api-node)/./models/Product.js\");\n/* harmony import */ var _models_Product__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_models_Product__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_formatProduct__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/formatProduct */ \"(api-node)/./utils/formatProduct.js\");\n\n\n\nasync function handler(req, res) {\n    if (req.method !== 'GET') {\n        return res.status(405).json({\n            error: 'Méthode non autorisée'\n        });\n    }\n    try {\n        await _config_db__WEBPACK_IMPORTED_MODULE_0___default()();\n        const limitNum = parseInt(req.query.limit, 10) || 5;\n        const products = await _models_Product__WEBPACK_IMPORTED_MODULE_1___default().find({}).sort({\n            ratingsCount: -1\n        }).limit(limitNum).lean();\n        return res.status(200).json(products.map(_utils_formatProduct__WEBPACK_IMPORTED_MODULE_2__.formatProduct));\n    } catch (error) {\n        console.error('Erreur API Most Viewed:', error);\n        return res.status(500).json({\n            error: 'Erreur serveur'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9wcm9kdWN0cy9tb3N0LXZpZXdlZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkM7QUFDRztBQUNlO0FBRTlDLGVBQWVHLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssT0FBTztRQUN4QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0I7SUFDL0Q7SUFDQSxJQUFJO1FBQ0YsTUFBTVQsaURBQVNBO1FBQ2YsTUFBTVUsV0FBV0MsU0FBU1AsSUFBSVEsS0FBSyxDQUFDQyxLQUFLLEVBQUUsT0FBTztRQUNsRCxNQUFNQyxXQUFXLE1BQU1iLDJEQUFZLENBQUMsQ0FBQyxHQUNsQ2UsSUFBSSxDQUFDO1lBQUVDLGNBQWMsQ0FBQztRQUFFLEdBQ3hCSixLQUFLLENBQUNILFVBQ05RLElBQUk7UUFDUCxPQUFPYixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDTSxTQUFTSyxHQUFHLENBQUNqQiwrREFBYUE7SUFDeEQsRUFBRSxPQUFPTyxPQUFPO1FBQ2RXLFFBQVFYLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU9KLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFpQjtJQUN4RDtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvdWlzIE9saXZpZXJcXERvd25sb2Fkc1xcZXdlYnNpdGUyLWZyYW5jaXNlXFxwYWdlc1xcYXBpXFxwcm9kdWN0c1xcbW9zdC12aWV3ZWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbm5lY3REQiBmcm9tICcuLi8uLi8uLi9jb25maWcvZGInO1xuaW1wb3J0IFByb2R1Y3QgZnJvbSAnLi4vLi4vLi4vbW9kZWxzL1Byb2R1Y3QnO1xuaW1wb3J0IHsgZm9ybWF0UHJvZHVjdCB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Zvcm1hdFByb2R1Y3QnO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IGVycm9yOiAnTcOpdGhvZGUgbm9uIGF1dG9yaXPDqWUnIH0pO1xuICB9XG4gIHRyeSB7XG4gICAgYXdhaXQgY29ubmVjdERCKCk7XG4gICAgY29uc3QgbGltaXROdW0gPSBwYXJzZUludChyZXEucXVlcnkubGltaXQsIDEwKSB8fCA1O1xuICAgIGNvbnN0IHByb2R1Y3RzID0gYXdhaXQgUHJvZHVjdC5maW5kKHt9KVxuICAgICAgLnNvcnQoeyByYXRpbmdzQ291bnQ6IC0xIH0pXG4gICAgICAubGltaXQobGltaXROdW0pXG4gICAgICAubGVhbigpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihwcm9kdWN0cy5tYXAoZm9ybWF0UHJvZHVjdCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBBUEkgTW9zdCBWaWV3ZWQ6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IGVycm9yOiAnRXJyZXVyIHNlcnZldXInIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29ubmVjdERCIiwiUHJvZHVjdCIsImZvcm1hdFByb2R1Y3QiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwibGltaXROdW0iLCJwYXJzZUludCIsInF1ZXJ5IiwibGltaXQiLCJwcm9kdWN0cyIsImZpbmQiLCJzb3J0IiwicmF0aW5nc0NvdW50IiwibGVhbiIsIm1hcCIsImNvbnNvbGUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/products/most-viewed.js\n");

/***/ }),

/***/ "(api-node)/./utils/formatProduct.js":
/*!********************************!*\
  !*** ./utils/formatProduct.js ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatProduct: () => (/* binding */ formatProduct)\n/* harmony export */ });\n// utilitaire de formatage des produits pour l'API et le front\nfunction formatProduct(raw) {\n    const thumbnails = [\n        raw.imageUrl || raw.image || '/assets/images/placeholder.jpg',\n        ...(raw.images || []).slice(0, 2)\n    ];\n    const formatted = {\n        id: raw._id || raw.id,\n        name: raw.name || 'Unnamed Product',\n        price: raw.price || 0,\n        salePrice: raw.discountPrice || raw.salePrice || 0,\n        img: raw.imageUrl || raw.image || '/assets/images/placeholder.jpg',\n        thumbnails,\n        seller: raw.seller || '',\n        shipping: raw.shipping || 0,\n        quantity: raw.quantity || 0,\n        tags: raw.tags || [],\n        category: typeof raw.category === 'object' ? raw.category.name : raw.category || '',\n        cloudinaryId: raw.cloudinaryId || '',\n        ratings: raw.rating || raw.ratings || 0,\n        ratingsCount: raw.rated || 0,\n        categoryBreadcrumbs: [\n            'Shop',\n            typeof raw.category === 'object' ? raw.category.name : raw.category || 'Products',\n            (raw.name?.substring(0, 20) || '') + '...'\n        ],\n        badges: raw.badges || [],\n        stock: raw.stock || raw.inStock || 0,\n        deliveryEstimate: raw.deliveryEstimate || '2-3 days',\n        specialOfferEndDate: raw.specialOfferEndDate || new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),\n        colors: raw.colors || [],\n        sizes: raw.sizes || [],\n        description: raw.description || `Description détaillée pour ${raw.name}`,\n        specifications: raw.specifications || [\n            raw.material,\n            raw.dimensions\n        ].filter(Boolean),\n        reviews: raw.reviews || [],\n        boughtTogether: raw.boughtTogether || [],\n        similarProducts: raw.similarProducts || []\n    };\n    return formatted;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3V0aWxzL2Zvcm1hdFByb2R1Y3QuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLDhEQUE4RDtBQUN2RCxTQUFTQSxjQUFjQyxHQUFHO0lBQy9CLE1BQU1DLGFBQWE7UUFDakJELElBQUlFLFFBQVEsSUFBSUYsSUFBSUcsS0FBSyxJQUFJO1dBQ3pCLENBQUNILElBQUlJLE1BQU0sSUFBSSxFQUFFLEVBQUVDLEtBQUssQ0FBQyxHQUFHO0tBQ2pDO0lBQ0QsTUFBTUMsWUFBWTtRQUNoQkMsSUFBSVAsSUFBSVEsR0FBRyxJQUFJUixJQUFJTyxFQUFFO1FBQ3JCRSxNQUFNVCxJQUFJUyxJQUFJLElBQUk7UUFDbEJDLE9BQU9WLElBQUlVLEtBQUssSUFBSTtRQUNwQkMsV0FBV1gsSUFBSVksYUFBYSxJQUFJWixJQUFJVyxTQUFTLElBQUk7UUFDakRFLEtBQUtiLElBQUlFLFFBQVEsSUFBSUYsSUFBSUcsS0FBSyxJQUFJO1FBQ2xDRjtRQUNBYSxRQUFRZCxJQUFJYyxNQUFNLElBQUk7UUFDdEJDLFVBQVVmLElBQUllLFFBQVEsSUFBSTtRQUMxQkMsVUFBVWhCLElBQUlnQixRQUFRLElBQUk7UUFDMUJDLE1BQU1qQixJQUFJaUIsSUFBSSxJQUFJLEVBQUU7UUFDcEJDLFVBQVUsT0FBT2xCLElBQUlrQixRQUFRLEtBQUssV0FBV2xCLElBQUlrQixRQUFRLENBQUNULElBQUksR0FBR1QsSUFBSWtCLFFBQVEsSUFBSTtRQUNqRkMsY0FBY25CLElBQUltQixZQUFZLElBQUk7UUFDbENDLFNBQVNwQixJQUFJcUIsTUFBTSxJQUFJckIsSUFBSW9CLE9BQU8sSUFBSTtRQUN0Q0UsY0FBY3RCLElBQUl1QixLQUFLLElBQUk7UUFDM0JDLHFCQUFxQjtZQUFDO1lBQVEsT0FBT3hCLElBQUlrQixRQUFRLEtBQUssV0FBV2xCLElBQUlrQixRQUFRLENBQUNULElBQUksR0FBR1QsSUFBSWtCLFFBQVEsSUFBSTtZQUFhbEIsQ0FBQUEsSUFBSVMsSUFBSSxFQUFFZ0IsVUFBVSxHQUFHLE9BQU8sRUFBQyxJQUFLO1NBQU07UUFDNUpDLFFBQVExQixJQUFJMEIsTUFBTSxJQUFJLEVBQUU7UUFDeEJDLE9BQU8zQixJQUFJMkIsS0FBSyxJQUFJM0IsSUFBSTRCLE9BQU8sSUFBSTtRQUNuQ0Msa0JBQWtCN0IsSUFBSTZCLGdCQUFnQixJQUFJO1FBQzFDQyxxQkFBcUI5QixJQUFJOEIsbUJBQW1CLElBQUksSUFBSUMsS0FBS0EsS0FBS0MsR0FBRyxLQUFLLElBQUksS0FBSyxLQUFLLEtBQUs7UUFDekZDLFFBQVFqQyxJQUFJaUMsTUFBTSxJQUFJLEVBQUU7UUFDeEJDLE9BQU9sQyxJQUFJa0MsS0FBSyxJQUFJLEVBQUU7UUFDdEJDLGFBQWFuQyxJQUFJbUMsV0FBVyxJQUFJLENBQUMsMkJBQTJCLEVBQUVuQyxJQUFJUyxJQUFJLEVBQUU7UUFDeEUyQixnQkFBZ0JwQyxJQUFJb0MsY0FBYyxJQUFJO1lBQUNwQyxJQUFJcUMsUUFBUTtZQUFFckMsSUFBSXNDLFVBQVU7U0FBQyxDQUFDQyxNQUFNLENBQUNDO1FBQzVFQyxTQUFTekMsSUFBSXlDLE9BQU8sSUFBSSxFQUFFO1FBQzFCQyxnQkFBZ0IxQyxJQUFJMEMsY0FBYyxJQUFJLEVBQUU7UUFDeENDLGlCQUFpQjNDLElBQUkyQyxlQUFlLElBQUksRUFBRTtJQUM1QztJQUNBLE9BQU9yQztBQUNUIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXExvdWlzIE9saXZpZXJcXERvd25sb2Fkc1xcZXdlYnNpdGUyLWZyYW5jaXNlXFx1dGlsc1xcZm9ybWF0UHJvZHVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyB1dGlsaXRhaXJlIGRlIGZvcm1hdGFnZSBkZXMgcHJvZHVpdHMgcG91ciBsJ0FQSSBldCBsZSBmcm9udFxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFByb2R1Y3QocmF3KSB7XG4gIGNvbnN0IHRodW1ibmFpbHMgPSBbXG4gICAgcmF3LmltYWdlVXJsIHx8IHJhdy5pbWFnZSB8fCAnL2Fzc2V0cy9pbWFnZXMvcGxhY2Vob2xkZXIuanBnJyxcbiAgICAuLi4oKHJhdy5pbWFnZXMgfHwgW10pLnNsaWNlKDAsIDIpKSxcbiAgXTtcbiAgY29uc3QgZm9ybWF0dGVkID0ge1xuICAgIGlkOiByYXcuX2lkIHx8IHJhdy5pZCxcbiAgICBuYW1lOiByYXcubmFtZSB8fCAnVW5uYW1lZCBQcm9kdWN0JyxcbiAgICBwcmljZTogcmF3LnByaWNlIHx8IDAsXG4gICAgc2FsZVByaWNlOiByYXcuZGlzY291bnRQcmljZSB8fCByYXcuc2FsZVByaWNlIHx8IDAsXG4gICAgaW1nOiByYXcuaW1hZ2VVcmwgfHwgcmF3LmltYWdlIHx8ICcvYXNzZXRzL2ltYWdlcy9wbGFjZWhvbGRlci5qcGcnLFxuICAgIHRodW1ibmFpbHMsXG4gICAgc2VsbGVyOiByYXcuc2VsbGVyIHx8ICcnLFxuICAgIHNoaXBwaW5nOiByYXcuc2hpcHBpbmcgfHwgMCxcbiAgICBxdWFudGl0eTogcmF3LnF1YW50aXR5IHx8IDAsXG4gICAgdGFnczogcmF3LnRhZ3MgfHwgW10sXG4gICAgY2F0ZWdvcnk6IHR5cGVvZiByYXcuY2F0ZWdvcnkgPT09ICdvYmplY3QnID8gcmF3LmNhdGVnb3J5Lm5hbWUgOiByYXcuY2F0ZWdvcnkgfHwgJycsXG4gICAgY2xvdWRpbmFyeUlkOiByYXcuY2xvdWRpbmFyeUlkIHx8ICcnLFxuICAgIHJhdGluZ3M6IHJhdy5yYXRpbmcgfHwgcmF3LnJhdGluZ3MgfHwgMCxcbiAgICByYXRpbmdzQ291bnQ6IHJhdy5yYXRlZCB8fCAwLFxuICAgIGNhdGVnb3J5QnJlYWRjcnVtYnM6IFsnU2hvcCcsIHR5cGVvZiByYXcuY2F0ZWdvcnkgPT09ICdvYmplY3QnID8gcmF3LmNhdGVnb3J5Lm5hbWUgOiByYXcuY2F0ZWdvcnkgfHwgJ1Byb2R1Y3RzJywgKHJhdy5uYW1lPy5zdWJzdHJpbmcoMCwgMjApIHx8ICcnKSArICcuLi4nXSxcbiAgICBiYWRnZXM6IHJhdy5iYWRnZXMgfHwgW10sXG4gICAgc3RvY2s6IHJhdy5zdG9jayB8fCByYXcuaW5TdG9jayB8fCAwLFxuICAgIGRlbGl2ZXJ5RXN0aW1hdGU6IHJhdy5kZWxpdmVyeUVzdGltYXRlIHx8ICcyLTMgZGF5cycsXG4gICAgc3BlY2lhbE9mZmVyRW5kRGF0ZTogcmF3LnNwZWNpYWxPZmZlckVuZERhdGUgfHwgbmV3IERhdGUoRGF0ZS5ub3coKSArIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSxcbiAgICBjb2xvcnM6IHJhdy5jb2xvcnMgfHwgW10sXG4gICAgc2l6ZXM6IHJhdy5zaXplcyB8fCBbXSxcbiAgICBkZXNjcmlwdGlvbjogcmF3LmRlc2NyaXB0aW9uIHx8IGBEZXNjcmlwdGlvbiBkw6l0YWlsbMOpZSBwb3VyICR7cmF3Lm5hbWV9YCxcbiAgICBzcGVjaWZpY2F0aW9uczogcmF3LnNwZWNpZmljYXRpb25zIHx8IFtyYXcubWF0ZXJpYWwsIHJhdy5kaW1lbnNpb25zXS5maWx0ZXIoQm9vbGVhbiksXG4gICAgcmV2aWV3czogcmF3LnJldmlld3MgfHwgW10sXG4gICAgYm91Z2h0VG9nZXRoZXI6IHJhdy5ib3VnaHRUb2dldGhlciB8fCBbXSxcbiAgICBzaW1pbGFyUHJvZHVjdHM6IHJhdy5zaW1pbGFyUHJvZHVjdHMgfHwgW10sXG4gIH07XG4gIHJldHVybiBmb3JtYXR0ZWQ7XG59XG4iXSwibmFtZXMiOlsiZm9ybWF0UHJvZHVjdCIsInJhdyIsInRodW1ibmFpbHMiLCJpbWFnZVVybCIsImltYWdlIiwiaW1hZ2VzIiwic2xpY2UiLCJmb3JtYXR0ZWQiLCJpZCIsIl9pZCIsIm5hbWUiLCJwcmljZSIsInNhbGVQcmljZSIsImRpc2NvdW50UHJpY2UiLCJpbWciLCJzZWxsZXIiLCJzaGlwcGluZyIsInF1YW50aXR5IiwidGFncyIsImNhdGVnb3J5IiwiY2xvdWRpbmFyeUlkIiwicmF0aW5ncyIsInJhdGluZyIsInJhdGluZ3NDb3VudCIsInJhdGVkIiwiY2F0ZWdvcnlCcmVhZGNydW1icyIsInN1YnN0cmluZyIsImJhZGdlcyIsInN0b2NrIiwiaW5TdG9jayIsImRlbGl2ZXJ5RXN0aW1hdGUiLCJzcGVjaWFsT2ZmZXJFbmREYXRlIiwiRGF0ZSIsIm5vdyIsImNvbG9ycyIsInNpemVzIiwiZGVzY3JpcHRpb24iLCJzcGVjaWZpY2F0aW9ucyIsIm1hdGVyaWFsIiwiZGltZW5zaW9ucyIsImZpbHRlciIsIkJvb2xlYW4iLCJyZXZpZXdzIiwiYm91Z2h0VG9nZXRoZXIiLCJzaW1pbGFyUHJvZHVjdHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./utils/formatProduct.js\n");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "slugify":
/*!**************************!*\
  !*** external "slugify" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("slugify");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2Fmost-viewed&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5Cmost-viewed.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();