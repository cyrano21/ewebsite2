"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/products/[id]";
exports.ids = ["pages/api/products/[id]"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_products_id_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\products\\[id].js */ \"(api-node)/./pages/api/products/[id].js\");\n\r\n\r\n\r\n// Import the userland code.\r\n\r\n// Re-export the handler (should be the default export).\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_id_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\r\n// Re-export config.\r\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_products_id_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\r\n// Create and export the route module that will be consumed.\r\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\r\n    definition: {\r\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\r\n        page: \"/api/products/[id]\",\r\n        pathname: \"/api/products/[id]\",\r\n        // The following aren't used in production.\r\n        bundlePath: '',\r\n        filename: ''\r\n    },\r\n    userland: _pages_api_products_id_js__WEBPACK_IMPORTED_MODULE_3__\r\n});\r\n\r\n//# sourceMappingURL=pages-api.js.map\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGcHJvZHVjdHMlMkYlNUJpZCU1RCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDcHJvZHVjdHMlNUMlNUJpZCU1RC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUM0RDtBQUM1RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsc0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHNEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0EiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XHJcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcclxuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XHJcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cclxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXHByb2R1Y3RzXFxcXFtpZF0uanNcIjtcclxuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cclxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XHJcbi8vIFJlLWV4cG9ydCBjb25maWcuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgJ2NvbmZpZycpO1xyXG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cclxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xyXG4gICAgZGVmaW5pdGlvbjoge1xyXG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXHJcbiAgICAgICAgcGFnZTogXCIvYXBpL3Byb2R1Y3RzL1tpZF1cIixcclxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2R1Y3RzL1tpZF1cIixcclxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXHJcbiAgICAgICAgYnVuZGxlUGF0aDogJycsXHJcbiAgICAgICAgZmlsZW5hbWU6ICcnXHJcbiAgICB9LFxyXG4gICAgdXNlcmxhbmRcclxufSk7XHJcblxyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwXHJcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/products/[id].js":
/*!************************************!*\
  !*** ./pages/api/products/[id].js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _src_config_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../src/config/db */ \"(api-node)/./src/config/db.js\");\n/* harmony import */ var _src_config_db__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_src_config_db__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _src_config_cloudinary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../src/config/cloudinary */ \"(api-node)/./src/config/cloudinary.js\");\n/* harmony import */ var _src_config_cloudinary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_src_config_cloudinary__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// Définition du schéma Product pour MongoDB\nconst ProductSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_1___default().Schema)({\n    name: {\n        type: String,\n        required: true,\n        trim: true\n    },\n    description: {\n        type: String,\n        required: true\n    },\n    price: {\n        type: Number,\n        required: true\n    },\n    discountPrice: {\n        type: Number,\n        required: false\n    },\n    category: {\n        type: String,\n        required: true\n    },\n    imageUrl: {\n        type: String,\n        required: false\n    },\n    cloudinaryId: {\n        type: String,\n        required: false\n    },\n    rating: {\n        type: Number,\n        default: 0\n    },\n    stock: {\n        type: Number,\n        default: 0\n    },\n    isNew: {\n        type: Boolean,\n        default: false\n    },\n    isFeatured: {\n        type: Boolean,\n        default: false\n    },\n    tags: {\n        type: [\n            String\n        ],\n        default: []\n    }\n}, {\n    timestamps: true\n});\n// Vérifier si le modèle existe déjà pour éviter les erreurs de redéfinition\nconst Product = (mongoose__WEBPACK_IMPORTED_MODULE_1___default().models).Product || mongoose__WEBPACK_IMPORTED_MODULE_1___default().model(\"Product\", ProductSchema);\nasync function handler(req, res) {\n    const { id } = req.query;\n    if (!id) {\n        return res.status(400).json({\n            error: \"ID du produit manquant\"\n        });\n    }\n    try {\n        // Connexion à MongoDB\n        const conn = await _src_config_db__WEBPACK_IMPORTED_MODULE_0___default()();\n        if (!conn) {\n            return res.status(500).json({\n                error: \"Erreur de connexion à la base de données\"\n            });\n        }\n        // Vérifier si l'ID est au format ObjectId MongoDB\n        const isValidObjectId = mongoose__WEBPACK_IMPORTED_MODULE_1___default().isValidObjectId(id);\n        switch(req.method){\n            case \"GET\":\n                let product;\n                if (isValidObjectId) {\n                    // Si l'ID est un ObjectId valide, utiliser findById\n                    product = await Product.findById(id);\n                } else {\n                    // Sinon, chercher par un champ 'uuid' ou équivalent, ou dans les données JSON\n                    try {\n                        // Essayer de charger depuis le fichier products.json\n                        const fs = __webpack_require__(/*! fs */ \"fs\");\n                        const path = __webpack_require__(/*! path */ \"path\");\n                        const filePath = path.join(process.cwd(), \"products.json\");\n                        if (fs.existsSync(filePath)) {\n                            const jsonData = fs.readFileSync(filePath, \"utf8\");\n                            const products = JSON.parse(jsonData);\n                            product = products.find((p)=>p.id === id);\n                        }\n                    } catch (jsonError) {\n                        console.error(\"Erreur lors de la lecture du fichier JSON:\", jsonError);\n                    }\n                }\n                if (!product) {\n                    return res.status(404).json({\n                        error: \"Produit non trouvé\"\n                    });\n                }\n                return res.status(200).json(product);\n            case \"PUT\":\n                let updatedProduct;\n                if (isValidObjectId) {\n                    // Si l'ID est un ObjectId valide\n                    updatedProduct = await Product.findByIdAndUpdate(id, req.body, {\n                        new: true,\n                        runValidators: true\n                    });\n                } else {\n                    return res.status(400).json({\n                        error: \"Format d'ID non valide pour la mise à jour\",\n                        message: \"L'ID du produit doit être un ObjectId MongoDB valide\"\n                    });\n                }\n                if (!updatedProduct) {\n                    return res.status(404).json({\n                        error: \"Produit non trouvé\"\n                    });\n                }\n                return res.status(200).json(updatedProduct);\n            case \"DELETE\":\n                if (!isValidObjectId) {\n                    return res.status(400).json({\n                        error: \"Format d'ID non valide pour la suppression\",\n                        message: \"L'ID du produit doit être un ObjectId MongoDB valide\"\n                    });\n                }\n                // Supprimer un produit\n                const productToDelete = await Product.findById(id);\n                if (!productToDelete) {\n                    return res.status(404).json({\n                        error: \"Produit non trouvé\"\n                    });\n                }\n                // Si le produit a une image Cloudinary, la supprimer également\n                if (productToDelete.cloudinaryId) {\n                    try {\n                        await (0,_src_config_cloudinary__WEBPACK_IMPORTED_MODULE_2__.deleteImage)(productToDelete.cloudinaryId);\n                    } catch (error) {\n                        console.error(\"Erreur lors de la suppression de l'image:\", error);\n                    // Continuer malgré l'erreur de suppression d'image\n                    }\n                }\n                await Product.findByIdAndDelete(id);\n                return res.status(200).json({\n                    message: \"Produit supprimé avec succès\"\n                });\n            default:\n                return res.status(405).json({\n                    error: \"Méthode non autorisée\"\n                });\n        }\n    } catch (error) {\n        console.error(\"Erreur API produit:\", error);\n        return res.status(500).json({\n            error: \"Erreur serveur\",\n            details: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQztvQkFBRTZCLFNBQVM7Z0JBQStCO1lBRXBEO2dCQUNFLE9BQU9qQyxJQUFJRyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO29CQUFFQyxPQUFPO2dCQUF3QjtRQUNqRTtJQUNGLEVBQUUsT0FBT0EsT0FBTztRQUNkc0IsUUFBUXRCLEtBQUssQ0FBQyx1QkFBdUJBO1FBQ3JDLE9BQU9MLElBQ0pHLE1BQU0sQ0FBQyxLQUNQQyxJQUFJLENBQUM7WUFBRUMsT0FBTztZQUFrQitCLFNBQVMvQixNQUFNNEIsT0FBTztRQUFDO0lBQzVEO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTG91aXMgT2xpdmllclxcRG93bmxvYWRzXFxld2Vic2l0ZTItZnJhbmNpc2VcXHBhZ2VzXFxhcGlcXHByb2R1Y3RzXFxbaWRdLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb25uZWN0REIgZnJvbSBcIi4uLy4uLy4uL3NyYy9jb25maWcvZGJcIjtcbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCB7IGRlbGV0ZUltYWdlIH0gZnJvbSBcIi4uLy4uLy4uL3NyYy9jb25maWcvY2xvdWRpbmFyeVwiO1xuXG4vLyBEw6lmaW5pdGlvbiBkdSBzY2jDqW1hIFByb2R1Y3QgcG91ciBNb25nb0RCXG5jb25zdCBQcm9kdWN0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIG5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgICAgdHJpbTogdHJ1ZSxcbiAgICB9LFxuICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIHByaWNlOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIGRpc2NvdW50UHJpY2U6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICB9LFxuICAgIGNhdGVnb3J5OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB9LFxuICAgIGltYWdlVXJsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogZmFsc2UsXG4gICAgfSxcbiAgICBjbG91ZGluYXJ5SWQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICB9LFxuICAgIHJhdGluZzoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMCxcbiAgICB9LFxuICAgIHN0b2NrOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwLFxuICAgIH0sXG4gICAgaXNOZXc6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuICAgIGlzRmVhdHVyZWQ6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuICAgIHRhZ3M6IHtcbiAgICAgIHR5cGU6IFtTdHJpbmddLFxuICAgICAgZGVmYXVsdDogW10sXG4gICAgfSxcbiAgfSxcbiAge1xuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gIH1cbik7XG5cbi8vIFbDqXJpZmllciBzaSBsZSBtb2TDqGxlIGV4aXN0ZSBkw6lqw6AgcG91ciDDqXZpdGVyIGxlcyBlcnJldXJzIGRlIHJlZMOpZmluaXRpb25cbmNvbnN0IFByb2R1Y3QgPVxuICBtb25nb29zZS5tb2RlbHMuUHJvZHVjdCB8fCBtb25nb29zZS5tb2RlbChcIlByb2R1Y3RcIiwgUHJvZHVjdFNjaGVtYSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgY29uc3QgeyBpZCB9ID0gcmVxLnF1ZXJ5O1xuXG4gIGlmICghaWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogXCJJRCBkdSBwcm9kdWl0IG1hbnF1YW50XCIgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIC8vIENvbm5leGlvbiDDoCBNb25nb0RCXG4gICAgY29uc3QgY29ubiA9IGF3YWl0IGNvbm5lY3REQigpO1xuXG4gICAgaWYgKCFjb25uKSB7XG4gICAgICByZXR1cm4gcmVzXG4gICAgICAgIC5zdGF0dXMoNTAwKVxuICAgICAgICAuanNvbih7IGVycm9yOiBcIkVycmV1ciBkZSBjb25uZXhpb24gw6AgbGEgYmFzZSBkZSBkb25uw6llc1wiIH0pO1xuICAgIH1cblxuICAgIC8vIFbDqXJpZmllciBzaSBsJ0lEIGVzdCBhdSBmb3JtYXQgT2JqZWN0SWQgTW9uZ29EQlxuICAgIGNvbnN0IGlzVmFsaWRPYmplY3RJZCA9IG1vbmdvb3NlLmlzVmFsaWRPYmplY3RJZChpZCk7XG5cbiAgICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcbiAgICAgIGNhc2UgXCJHRVRcIjpcbiAgICAgICAgbGV0IHByb2R1Y3Q7XG5cbiAgICAgICAgaWYgKGlzVmFsaWRPYmplY3RJZCkge1xuICAgICAgICAgIC8vIFNpIGwnSUQgZXN0IHVuIE9iamVjdElkIHZhbGlkZSwgdXRpbGlzZXIgZmluZEJ5SWRcbiAgICAgICAgICBwcm9kdWN0ID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChpZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2lub24sIGNoZXJjaGVyIHBhciB1biBjaGFtcCAndXVpZCcgb3Ugw6lxdWl2YWxlbnQsIG91IGRhbnMgbGVzIGRvbm7DqWVzIEpTT05cbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gRXNzYXllciBkZSBjaGFyZ2VyIGRlcHVpcyBsZSBmaWNoaWVyIHByb2R1Y3RzLmpzb25cbiAgICAgICAgICAgIGNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuICAgICAgICAgICAgY29uc3QgcGF0aCA9IHJlcXVpcmUoXCJwYXRoXCIpO1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCJwcm9kdWN0cy5qc29uXCIpO1xuXG4gICAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgY29uc3QganNvbkRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsIFwidXRmOFwiKTtcbiAgICAgICAgICAgICAgY29uc3QgcHJvZHVjdHMgPSBKU09OLnBhcnNlKGpzb25EYXRhKTtcbiAgICAgICAgICAgICAgcHJvZHVjdCA9IHByb2R1Y3RzLmZpbmQoKHApID0+IHAuaWQgPT09IGlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChqc29uRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIFwiRXJyZXVyIGxvcnMgZGUgbGEgbGVjdHVyZSBkdSBmaWNoaWVyIEpTT046XCIsXG4gICAgICAgICAgICAgIGpzb25FcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXByb2R1Y3QpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogXCJQcm9kdWl0IG5vbiB0cm91dsOpXCIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHByb2R1Y3QpO1xuXG4gICAgICBjYXNlIFwiUFVUXCI6XG4gICAgICAgIGxldCB1cGRhdGVkUHJvZHVjdDtcblxuICAgICAgICBpZiAoaXNWYWxpZE9iamVjdElkKSB7XG4gICAgICAgICAgLy8gU2kgbCdJRCBlc3QgdW4gT2JqZWN0SWQgdmFsaWRlXG4gICAgICAgICAgdXBkYXRlZFByb2R1Y3QgPSBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkQW5kVXBkYXRlKGlkLCByZXEuYm9keSwge1xuICAgICAgICAgICAgbmV3OiB0cnVlLFxuICAgICAgICAgICAgcnVuVmFsaWRhdG9yczogdHJ1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xuICAgICAgICAgICAgZXJyb3I6IFwiRm9ybWF0IGQnSUQgbm9uIHZhbGlkZSBwb3VyIGxhIG1pc2Ugw6Agam91clwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJMJ0lEIGR1IHByb2R1aXQgZG9pdCDDqnRyZSB1biBPYmplY3RJZCBNb25nb0RCIHZhbGlkZVwiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF1cGRhdGVkUHJvZHVjdCkge1xuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiBcIlByb2R1aXQgbm9uIHRyb3V2w6lcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24odXBkYXRlZFByb2R1Y3QpO1xuXG4gICAgICBjYXNlIFwiREVMRVRFXCI6XG4gICAgICAgIGlmICghaXNWYWxpZE9iamVjdElkKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICAgIGVycm9yOiBcIkZvcm1hdCBkJ0lEIG5vbiB2YWxpZGUgcG91ciBsYSBzdXBwcmVzc2lvblwiLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJMJ0lEIGR1IHByb2R1aXQgZG9pdCDDqnRyZSB1biBPYmplY3RJZCBNb25nb0RCIHZhbGlkZVwiLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU3VwcHJpbWVyIHVuIHByb2R1aXRcbiAgICAgICAgY29uc3QgcHJvZHVjdFRvRGVsZXRlID0gYXdhaXQgUHJvZHVjdC5maW5kQnlJZChpZCk7XG4gICAgICAgIGlmICghcHJvZHVjdFRvRGVsZXRlKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgZXJyb3I6IFwiUHJvZHVpdCBub24gdHJvdXbDqVwiIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2kgbGUgcHJvZHVpdCBhIHVuZSBpbWFnZSBDbG91ZGluYXJ5LCBsYSBzdXBwcmltZXIgw6lnYWxlbWVudFxuICAgICAgICBpZiAocHJvZHVjdFRvRGVsZXRlLmNsb3VkaW5hcnlJZCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBkZWxldGVJbWFnZShwcm9kdWN0VG9EZWxldGUuY2xvdWRpbmFyeUlkKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBsb3JzIGRlIGxhIHN1cHByZXNzaW9uIGRlIGwnaW1hZ2U6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIC8vIENvbnRpbnVlciBtYWxncsOpIGwnZXJyZXVyIGRlIHN1cHByZXNzaW9uIGQnaW1hZ2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBQcm9kdWN0LmZpbmRCeUlkQW5kRGVsZXRlKGlkKTtcbiAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICAgIC5zdGF0dXMoMjAwKVxuICAgICAgICAgIC5qc29uKHsgbWVzc2FnZTogXCJQcm9kdWl0IHN1cHByaW3DqSBhdmVjIHN1Y2PDqHNcIiB9KTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6IFwiTcOpdGhvZGUgbm9uIGF1dG9yaXPDqWVcIiB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycmV1ciBBUEkgcHJvZHVpdDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiByZXNcbiAgICAgIC5zdGF0dXMoNTAwKVxuICAgICAgLmpzb24oeyBlcnJvcjogXCJFcnJldXIgc2VydmV1clwiLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiY29ubmVjdERCIiwibW9uZ29vc2UiLCJkZWxldGVJbWFnZSIsIlByb2R1Y3RTY2hlbWEiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidHJpbSIsImRlc2NyaXB0aW9uIiwicHJpY2UiLCJOdW1iZXIiLCJkaXNjb3VudFByaWNlIiwiY2F0ZWdvcnkiLCJpbWFnZVVybCIsImNsb3VkaW5hcnlJZCIsInJhdGluZyIsImRlZmF1bHQiLCJzdG9jayIsImlzTmV3IiwiQm9vbGVhbiIsImlzRmVhdHVyZWQiLCJ0YWdzIiwidGltZXN0YW1wcyIsIlByb2R1Y3QiLCJtb2RlbHMiLCJtb2RlbCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJpZCIsInF1ZXJ5Iiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29ubiIsImlzVmFsaWRPYmplY3RJZCIsIm1ldGhvZCIsInByb2R1Y3QiLCJmaW5kQnlJZCIsImZzIiwicmVxdWlyZSIsInBhdGgiLCJmaWxlUGF0aCIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiZXhpc3RzU3luYyIsImpzb25EYXRhIiwicmVhZEZpbGVTeW5jIiwicHJvZHVjdHMiLCJKU09OIiwicGFyc2UiLCJmaW5kIiwicCIsImpzb25FcnJvciIsImNvbnNvbGUiLCJ1cGRhdGVkUHJvZHVjdCIsImZpbmRCeUlkQW5kVXBkYXRlIiwiYm9keSIsIm5ldyIsInJ1blZhbGlkYXRvcnMiLCJtZXNzYWdlIiwicHJvZHVjdFRvRGVsZXRlIiwiZmluZEJ5SWRBbmREZWxldGUiLCJkZXRhaWxzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/products/[id].js\n");

/***/ }),

/***/ "(api-node)/./src/config/cloudinary.js":
/*!**********************************!*\
  !*** ./src/config/cloudinary.js ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst cloudinary = (__webpack_require__(/*! cloudinary */ \"cloudinary\").v2);\n// Configuration de Cloudinary\ncloudinary.config({\n    cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n    api_key: process.env.CLOUDINARY_API_KEY,\n    api_secret: process.env.CLOUDINARY_API_SECRET,\n    secure: true\n});\n/**\r\n * Fonction pour uploader une image sur Cloudinary\r\n * @param {File|Buffer|String} file - Fichier à uploader (peut être un chemin, un buffer ou un objet File)\r\n * @param {Object} options - Options supplémentaires pour l'upload\r\n * @returns {Promise} - Promesse avec les détails du fichier uploadé\r\n */ const uploadImage = async (file, options = {})=>{\n    try {\n        // Options par défaut (dossier de destination et gestion des transformations)\n        const defaultOptions = {\n            folder: 'ewebsite2-francise/blog',\n            resource_type: 'auto',\n            ...options\n        };\n        // Upload du fichier\n        const result = await cloudinary.uploader.upload(file, defaultOptions);\n        return {\n            publicId: result.public_id,\n            url: result.secure_url,\n            format: result.format,\n            width: result.width,\n            height: result.height,\n            resource_type: result.resource_type\n        };\n    } catch (error) {\n        console.error('Erreur lors de l\\'upload sur Cloudinary:', error);\n        throw new Error(`Erreur d'upload: ${error.message}`);\n    }\n};\n/**\r\n * Fonction pour supprimer une image de Cloudinary\r\n * @param {String} publicId - ID public de l'image à supprimer\r\n * @returns {Promise} - Promesse avec le résultat de la suppression\r\n */ const deleteImage = async (publicId)=>{\n    try {\n        const result = await cloudinary.uploader.destroy(publicId);\n        return result;\n    } catch (error) {\n        console.error('Erreur lors de la suppression sur Cloudinary:', error);\n        throw new Error(`Erreur de suppression: ${error.message}`);\n    }\n};\n/**\r\n * Fonction pour générer une URL de transformation Cloudinary\r\n * @param {String} publicId - ID public de l'image\r\n * @param {Object} options - Options de transformation\r\n * @returns {String} - URL de l'image transformée\r\n */ const getImageUrl = (publicId, options = {})=>{\n    const defaultOptions = {\n        secure: true,\n        ...options\n    };\n    return cloudinary.url(publicId, defaultOptions);\n};\nmodule.exports = {\n    cloudinary,\n    uploadImage,\n    deleteImage,\n    getImageUrl\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9jb25maWcvY2xvdWRpbmFyeS5qcyIsIm1hcHBpbmdzIjoiO0FBQUEsTUFBTUEsYUFBYUMsd0RBQXdCO0FBRTNDLDhCQUE4QjtBQUM5QkQsV0FBV0csTUFBTSxDQUFDO0lBQ2hCQyxZQUFZQyxRQUFRQyxHQUFHLENBQUNDLHFCQUFxQjtJQUM3Q0MsU0FBU0gsUUFBUUMsR0FBRyxDQUFDRyxrQkFBa0I7SUFDdkNDLFlBQVlMLFFBQVFDLEdBQUcsQ0FBQ0sscUJBQXFCO0lBQzdDQyxRQUFRO0FBQ1Y7QUFFQTs7Ozs7Q0FLQyxHQUNELE1BQU1DLGNBQWMsT0FBT0MsTUFBTUMsVUFBVSxDQUFDLENBQUM7SUFDM0MsSUFBSTtRQUNGLDZFQUE2RTtRQUM3RSxNQUFNQyxpQkFBaUI7WUFDckJDLFFBQVE7WUFDUkMsZUFBZTtZQUNmLEdBQUdILE9BQU87UUFDWjtRQUVBLG9CQUFvQjtRQUNwQixNQUFNSSxTQUFTLE1BQU1uQixXQUFXb0IsUUFBUSxDQUFDQyxNQUFNLENBQUNQLE1BQU1FO1FBQ3RELE9BQU87WUFDTE0sVUFBVUgsT0FBT0ksU0FBUztZQUMxQkMsS0FBS0wsT0FBT00sVUFBVTtZQUN0QkMsUUFBUVAsT0FBT08sTUFBTTtZQUNyQkMsT0FBT1IsT0FBT1EsS0FBSztZQUNuQkMsUUFBUVQsT0FBT1MsTUFBTTtZQUNyQlYsZUFBZUMsT0FBT0QsYUFBYTtRQUNyQztJQUNGLEVBQUUsT0FBT1csT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNENBQTRDQTtRQUMxRCxNQUFNLElBQUlFLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRUYsTUFBTUcsT0FBTyxFQUFFO0lBQ3JEO0FBQ0Y7QUFFQTs7OztDQUlDLEdBQ0QsTUFBTUMsY0FBYyxPQUFPWDtJQUN6QixJQUFJO1FBQ0YsTUFBTUgsU0FBUyxNQUFNbkIsV0FBV29CLFFBQVEsQ0FBQ2MsT0FBTyxDQUFDWjtRQUNqRCxPQUFPSDtJQUNULEVBQUUsT0FBT1UsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsaURBQWlEQTtRQUMvRCxNQUFNLElBQUlFLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRUYsTUFBTUcsT0FBTyxFQUFFO0lBQzNEO0FBQ0Y7QUFFQTs7Ozs7Q0FLQyxHQUNELE1BQU1HLGNBQWMsQ0FBQ2IsVUFBVVAsVUFBVSxDQUFDLENBQUM7SUFDekMsTUFBTUMsaUJBQWlCO1FBQ3JCSixRQUFRO1FBQ1IsR0FBR0csT0FBTztJQUNaO0lBQ0EsT0FBT2YsV0FBV3dCLEdBQUcsQ0FBQ0YsVUFBVU47QUFDbEM7QUFFQW9CLE9BQU9DLE9BQU8sR0FBRztJQUNmckM7SUFDQWE7SUFDQW9CO0lBQ0FFO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcTG91aXMgT2xpdmllclxcRG93bmxvYWRzXFxld2Vic2l0ZTItZnJhbmNpc2VcXHNyY1xcY29uZmlnXFxjbG91ZGluYXJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNsb3VkaW5hcnkgPSByZXF1aXJlKCdjbG91ZGluYXJ5JykudjI7XHJcblxyXG4vLyBDb25maWd1cmF0aW9uIGRlIENsb3VkaW5hcnlcclxuY2xvdWRpbmFyeS5jb25maWcoe1xyXG4gIGNsb3VkX25hbWU6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQ0xPVURfTkFNRSxcclxuICBhcGlfa2V5OiBwcm9jZXNzLmVudi5DTE9VRElOQVJZX0FQSV9LRVksXHJcbiAgYXBpX3NlY3JldDogcHJvY2Vzcy5lbnYuQ0xPVURJTkFSWV9BUElfU0VDUkVULFxyXG4gIHNlY3VyZTogdHJ1ZVxyXG59KTtcclxuXHJcbi8qKlxyXG4gKiBGb25jdGlvbiBwb3VyIHVwbG9hZGVyIHVuZSBpbWFnZSBzdXIgQ2xvdWRpbmFyeVxyXG4gKiBAcGFyYW0ge0ZpbGV8QnVmZmVyfFN0cmluZ30gZmlsZSAtIEZpY2hpZXIgw6AgdXBsb2FkZXIgKHBldXQgw6p0cmUgdW4gY2hlbWluLCB1biBidWZmZXIgb3UgdW4gb2JqZXQgRmlsZSlcclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSBPcHRpb25zIHN1cHBsw6ltZW50YWlyZXMgcG91ciBsJ3VwbG9hZFxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZX0gLSBQcm9tZXNzZSBhdmVjIGxlcyBkw6l0YWlscyBkdSBmaWNoaWVyIHVwbG9hZMOpXHJcbiAqL1xyXG5jb25zdCB1cGxvYWRJbWFnZSA9IGFzeW5jIChmaWxlLCBvcHRpb25zID0ge30pID0+IHtcclxuICB0cnkge1xyXG4gICAgLy8gT3B0aW9ucyBwYXIgZMOpZmF1dCAoZG9zc2llciBkZSBkZXN0aW5hdGlvbiBldCBnZXN0aW9uIGRlcyB0cmFuc2Zvcm1hdGlvbnMpXHJcbiAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgICAgZm9sZGVyOiAnZXdlYnNpdGUyLWZyYW5jaXNlL2Jsb2cnLFxyXG4gICAgICByZXNvdXJjZV90eXBlOiAnYXV0bycsXHJcbiAgICAgIC4uLm9wdGlvbnNcclxuICAgIH07XHJcblxyXG4gICAgLy8gVXBsb2FkIGR1IGZpY2hpZXJcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsb3VkaW5hcnkudXBsb2FkZXIudXBsb2FkKGZpbGUsIGRlZmF1bHRPcHRpb25zKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHB1YmxpY0lkOiByZXN1bHQucHVibGljX2lkLFxyXG4gICAgICB1cmw6IHJlc3VsdC5zZWN1cmVfdXJsLFxyXG4gICAgICBmb3JtYXQ6IHJlc3VsdC5mb3JtYXQsXHJcbiAgICAgIHdpZHRoOiByZXN1bHQud2lkdGgsXHJcbiAgICAgIGhlaWdodDogcmVzdWx0LmhlaWdodCxcclxuICAgICAgcmVzb3VyY2VfdHlwZTogcmVzdWx0LnJlc291cmNlX3R5cGVcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0VycmV1ciBsb3JzIGRlIGxcXCd1cGxvYWQgc3VyIENsb3VkaW5hcnk6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJldXIgZCd1cGxvYWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogRm9uY3Rpb24gcG91ciBzdXBwcmltZXIgdW5lIGltYWdlIGRlIENsb3VkaW5hcnlcclxuICogQHBhcmFtIHtTdHJpbmd9IHB1YmxpY0lkIC0gSUQgcHVibGljIGRlIGwnaW1hZ2Ugw6Agc3VwcHJpbWVyXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlfSAtIFByb21lc3NlIGF2ZWMgbGUgcsOpc3VsdGF0IGRlIGxhIHN1cHByZXNzaW9uXHJcbiAqL1xyXG5jb25zdCBkZWxldGVJbWFnZSA9IGFzeW5jIChwdWJsaWNJZCkgPT4ge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjbG91ZGluYXJ5LnVwbG9hZGVyLmRlc3Ryb3kocHVibGljSWQpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyZXVyIGxvcnMgZGUgbGEgc3VwcHJlc3Npb24gc3VyIENsb3VkaW5hcnk6JywgZXJyb3IpO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJldXIgZGUgc3VwcHJlc3Npb246ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogRm9uY3Rpb24gcG91ciBnw6luw6lyZXIgdW5lIFVSTCBkZSB0cmFuc2Zvcm1hdGlvbiBDbG91ZGluYXJ5XHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBwdWJsaWNJZCAtIElEIHB1YmxpYyBkZSBsJ2ltYWdlXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gT3B0aW9ucyBkZSB0cmFuc2Zvcm1hdGlvblxyXG4gKiBAcmV0dXJucyB7U3RyaW5nfSAtIFVSTCBkZSBsJ2ltYWdlIHRyYW5zZm9ybcOpZVxyXG4gKi9cclxuY29uc3QgZ2V0SW1hZ2VVcmwgPSAocHVibGljSWQsIG9wdGlvbnMgPSB7fSkgPT4ge1xyXG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgc2VjdXJlOiB0cnVlLFxyXG4gICAgLi4ub3B0aW9uc1xyXG4gIH07XHJcbiAgcmV0dXJuIGNsb3VkaW5hcnkudXJsKHB1YmxpY0lkLCBkZWZhdWx0T3B0aW9ucyk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBjbG91ZGluYXJ5LFxyXG4gIHVwbG9hZEltYWdlLFxyXG4gIGRlbGV0ZUltYWdlLFxyXG4gIGdldEltYWdlVXJsXHJcbn07XHJcbiJdLCJuYW1lcyI6WyJjbG91ZGluYXJ5IiwicmVxdWlyZSIsInYyIiwiY29uZmlnIiwiY2xvdWRfbmFtZSIsInByb2Nlc3MiLCJlbnYiLCJDTE9VRElOQVJZX0NMT1VEX05BTUUiLCJhcGlfa2V5IiwiQ0xPVURJTkFSWV9BUElfS0VZIiwiYXBpX3NlY3JldCIsIkNMT1VESU5BUllfQVBJX1NFQ1JFVCIsInNlY3VyZSIsInVwbG9hZEltYWdlIiwiZmlsZSIsIm9wdGlvbnMiLCJkZWZhdWx0T3B0aW9ucyIsImZvbGRlciIsInJlc291cmNlX3R5cGUiLCJyZXN1bHQiLCJ1cGxvYWRlciIsInVwbG9hZCIsInB1YmxpY0lkIiwicHVibGljX2lkIiwidXJsIiwic2VjdXJlX3VybCIsImZvcm1hdCIsIndpZHRoIiwiaGVpZ2h0IiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJtZXNzYWdlIiwiZGVsZXRlSW1hZ2UiLCJkZXN0cm95IiwiZ2V0SW1hZ2VVcmwiLCJtb2R1bGUiLCJleHBvcnRzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/config/cloudinary.js\n");

/***/ }),

/***/ "(api-node)/./src/config/db.js":
/*!**************************!*\
  !*** ./src/config/db.js ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\n// Options de connexion\nconst options = {\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n};\n// URL de connexion (utilse la variable d'environnement ou une URL par défaut pour le développement local)\nconst connectionUrl = process.env.MONGODB_URI || 'mongodb://localhost:27017/ewebsite2-francise';\n// Fonction de connexion à la base de données\nconst connectDB = async ()=>{\n    try {\n        const conn = await mongoose.connect(connectionUrl, options);\n        console.log(`MongoDB connecté: ${conn.connection.host}`);\n        return conn;\n    } catch (error) {\n        console.error(`Erreur de connexion à MongoDB: ${error.message}`);\n        // Mode fallback - utilser des données locales\n        console.warn('utilsation du mode hors ligne avec des données locales.');\n        return null;\n    }\n};\n// Vérification de la connexion\nmongoose.connection.on('connected', ()=>{\n    console.log('Mongoose connecté à MongoDB');\n});\nmongoose.connection.on('error', (err)=>{\n    console.error(`Erreur de connexion Mongoose: ${err.message}`);\n});\nmongoose.connection.on('disconnected', ()=>{\n    console.log('Mongoose déconnecté de MongoDB');\n});\n// Fermeture propre lors de l'arrêt de l'application\nprocess.on('SIGINT', async ()=>{\n    await mongoose.connection.close();\n    console.log('Connexion à MongoDB fermée suite à l\\'arrêt de l\\'application');\n    process.exit(0);\n});\nmodule.exports = connectDB;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9jb25maWcvZGIuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU1BLFdBQVdDLG1CQUFPQSxDQUFDLDBCQUFVO0FBRW5DLHVCQUF1QjtBQUN2QixNQUFNQyxVQUFVO0lBQ2RDLGlCQUFpQjtJQUNqQkMsb0JBQW9CO0FBQ3RCO0FBRUEsMEdBQTBHO0FBQzFHLE1BQU1DLGdCQUFnQkMsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLElBQUk7QUFFakQsNkNBQTZDO0FBQzdDLE1BQU1DLFlBQVk7SUFDaEIsSUFBSTtRQUNGLE1BQU1DLE9BQU8sTUFBTVYsU0FBU1csT0FBTyxDQUFDTixlQUFlSDtRQUNuRFUsUUFBUUMsR0FBRyxDQUFDLENBQUMsa0JBQWtCLEVBQUVILEtBQUtJLFVBQVUsQ0FBQ0MsSUFBSSxFQUFFO1FBQ3ZELE9BQU9MO0lBQ1QsRUFBRSxPQUFPTSxPQUFPO1FBQ2RKLFFBQVFJLEtBQUssQ0FBQyxDQUFDLCtCQUErQixFQUFFQSxNQUFNQyxPQUFPLEVBQUU7UUFDL0QsOENBQThDO1FBQzlDTCxRQUFRTSxJQUFJLENBQUM7UUFDYixPQUFPO0lBQ1Q7QUFDRjtBQUVBLCtCQUErQjtBQUMvQmxCLFNBQVNjLFVBQVUsQ0FBQ0ssRUFBRSxDQUFDLGFBQWE7SUFDbENQLFFBQVFDLEdBQUcsQ0FBQztBQUNkO0FBRUFiLFNBQVNjLFVBQVUsQ0FBQ0ssRUFBRSxDQUFDLFNBQVMsQ0FBQ0M7SUFDL0JSLFFBQVFJLEtBQUssQ0FBQyxDQUFDLDhCQUE4QixFQUFFSSxJQUFJSCxPQUFPLEVBQUU7QUFDOUQ7QUFFQWpCLFNBQVNjLFVBQVUsQ0FBQ0ssRUFBRSxDQUFDLGdCQUFnQjtJQUNyQ1AsUUFBUUMsR0FBRyxDQUFDO0FBQ2Q7QUFFQSxvREFBb0Q7QUFDcERQLFFBQVFhLEVBQUUsQ0FBQyxVQUFVO0lBQ25CLE1BQU1uQixTQUFTYyxVQUFVLENBQUNPLEtBQUs7SUFDL0JULFFBQVFDLEdBQUcsQ0FBQztJQUNaUCxRQUFRZ0IsSUFBSSxDQUFDO0FBQ2Y7QUFFQUMsT0FBT0MsT0FBTyxHQUFHZiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxMb3VpcyBPbGl2aWVyXFxEb3dubG9hZHNcXGV3ZWJzaXRlMi1mcmFuY2lzZVxcc3JjXFxjb25maWdcXGRiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcclxuXHJcbi8vIE9wdGlvbnMgZGUgY29ubmV4aW9uXHJcbmNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxyXG4gIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcclxufTtcclxuXHJcbi8vIFVSTCBkZSBjb25uZXhpb24gKHV0aWxzZSBsYSB2YXJpYWJsZSBkJ2Vudmlyb25uZW1lbnQgb3UgdW5lIFVSTCBwYXIgZMOpZmF1dCBwb3VyIGxlIGTDqXZlbG9wcGVtZW50IGxvY2FsKVxyXG5jb25zdCBjb25uZWN0aW9uVXJsID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkgfHwgJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvZXdlYnNpdGUyLWZyYW5jaXNlJztcclxuXHJcbi8vIEZvbmN0aW9uIGRlIGNvbm5leGlvbiDDoCBsYSBiYXNlIGRlIGRvbm7DqWVzXHJcbmNvbnN0IGNvbm5lY3REQiA9IGFzeW5jICgpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgY29ubiA9IGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoY29ubmVjdGlvblVybCwgb3B0aW9ucyk7XHJcbiAgICBjb25zb2xlLmxvZyhgTW9uZ29EQiBjb25uZWN0w6k6ICR7Y29ubi5jb25uZWN0aW9uLmhvc3R9YCk7XHJcbiAgICByZXR1cm4gY29ubjtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcihgRXJyZXVyIGRlIGNvbm5leGlvbiDDoCBNb25nb0RCOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAvLyBNb2RlIGZhbGxiYWNrIC0gdXRpbHNlciBkZXMgZG9ubsOpZXMgbG9jYWxlc1xyXG4gICAgY29uc29sZS53YXJuKCd1dGlsc2F0aW9uIGR1IG1vZGUgaG9ycyBsaWduZSBhdmVjIGRlcyBkb25uw6llcyBsb2NhbGVzLicpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gVsOpcmlmaWNhdGlvbiBkZSBsYSBjb25uZXhpb25cclxubW9uZ29vc2UuY29ubmVjdGlvbi5vbignY29ubmVjdGVkJywgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKCdNb25nb29zZSBjb25uZWN0w6kgw6AgTW9uZ29EQicpO1xyXG59KTtcclxuXHJcbm1vbmdvb3NlLmNvbm5lY3Rpb24ub24oJ2Vycm9yJywgKGVycikgPT4ge1xyXG4gIGNvbnNvbGUuZXJyb3IoYEVycmV1ciBkZSBjb25uZXhpb24gTW9uZ29vc2U6ICR7ZXJyLm1lc3NhZ2V9YCk7XHJcbn0pO1xyXG5cclxubW9uZ29vc2UuY29ubmVjdGlvbi5vbignZGlzY29ubmVjdGVkJywgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKCdNb25nb29zZSBkw6ljb25uZWN0w6kgZGUgTW9uZ29EQicpO1xyXG59KTtcclxuXHJcbi8vIEZlcm1ldHVyZSBwcm9wcmUgbG9ycyBkZSBsJ2FycsOqdCBkZSBsJ2FwcGxpY2F0aW9uXHJcbnByb2Nlc3Mub24oJ1NJR0lOVCcsIGFzeW5jICgpID0+IHtcclxuICBhd2FpdCBtb25nb29zZS5jb25uZWN0aW9uLmNsb3NlKCk7XHJcbiAgY29uc29sZS5sb2coJ0Nvbm5leGlvbiDDoCBNb25nb0RCIGZlcm3DqWUgc3VpdGUgw6AgbFxcJ2FycsOqdCBkZSBsXFwnYXBwbGljYXRpb24nKTtcclxuICBwcm9jZXNzLmV4aXQoMCk7XHJcbn0pO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjb25uZWN0REI7XHJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJvcHRpb25zIiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwiY29ubmVjdGlvblVybCIsInByb2Nlc3MiLCJlbnYiLCJNT05HT0RCX1VSSSIsImNvbm5lY3REQiIsImNvbm4iLCJjb25uZWN0IiwiY29uc29sZSIsImxvZyIsImNvbm5lY3Rpb24iLCJob3N0IiwiZXJyb3IiLCJtZXNzYWdlIiwid2FybiIsIm9uIiwiZXJyIiwiY2xvc2UiLCJleGl0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/config/db.js\n");

/***/ }),

/***/ "cloudinary":
/*!*****************************!*\
  !*** external "cloudinary" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("cloudinary");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fproducts%2F%5Bid%5D&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cproducts%5C%5Bid%5D.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();